{
  "version": "1.1.0",
  "component_kind": null,
  "elements": [
    {
      "type": "h1",
      "content": [
        "Hypermedia Counter"
      ]
    },
    {
      "type": "p",
      "content": [
        "This counter demonstrates the power of hypermedia - the MCP server publishes complete UI elements as Nostr events!"
      ]
    },
    {
      "type": "h2",
      "content": [
        "Two Views of the Same Data:"
      ]
    },
    {
      "type": "h3",
      "content": [
        "View 1: Data-Based (kind 30078)"
      ]
    },
    {
      "type": "div",
      "elements": [
        {
          "type": "h2",
          "content": [
            "Count: {$counter_value or \"--\"}"
          ]
        },
        {
          "type": "p",
          "content": [
            {
              "type": "em",
              "content": [
                "Simple data query from kind 30078"
              ]
            },
            " "
          ]
        }
      ],
      "style": {
        "padding": "1rem",
        "backgroundColor": "rgb(240,253,244)",
        "borderRadius": "0.5rem",
        "marginBottom": "1rem",
        "textAlign": "center"
      }
    },
    {
      "type": "h3",
      "content": [
        "View 2: Hypermedia Element (kind 32616)"
      ]
    },
    {
      "type": "if",
      "elements": [
        {
          "type": "div",
          "elements": [
            {
              "type": "p",
              "content": [
                "    ",
                {
                  "type": "em",
                  "content": [
                    "Rendered Hypernote element from MCP:"
                  ]
                },
                " ",
                "    ",
                "    ",
                {
                  "type": "strong",
                  "content": [
                    "Hypernote UI element published by MCP"
                  ]
                },
                " ",
                "    ",
                "    (TODO: Dynamic component rendering)",
                " ",
                "  "
              ]
            }
          ],
          "style": {
            "padding": "1rem",
            "backgroundColor": "rgb(239,246,255)",
            "borderRadius": "0.5rem",
            "marginBottom": "1rem",
            "textAlign": "center"
          }
        },
        {
          "type": "else",
          "content": []
        },
        {
          "type": "div",
          "elements": [
            {
              "type": "p",
              "content": [
                "    ",
                {
                  "type": "em",
                  "content": [
                    "No Hypernote UI element yet"
                  ]
                },
                " ",
                "  "
              ]
            }
          ],
          "style": {
            "padding": "1rem",
            "backgroundColor": "rgb(243,244,246)",
            "borderRadius": "0.5rem",
            "marginBottom": "1rem",
            "textAlign": "center"
          }
        }
      ],
      "condition": "$counter_ui"
    },
    {
      "type": "h2",
      "content": [
        "Controls"
      ]
    },
    {
      "type": "div",
      "elements": [
        {
          "type": "form",
          "elements": [
            {
              "type": "button",
              "elements": [
                {
                  "type": "p",
                  "content": [
                    "+1"
                  ]
                }
              ],
              "style": {
                "backgroundColor": "rgb(34,197,94)",
                "color": "rgb(255,255,255)",
                "paddingLeft": "1.5rem",
                "paddingRight": "1.5rem",
                "paddingTop": "0.75rem",
                "paddingBottom": "0.75rem",
                "borderRadius": "0.5rem",
                "fontSize": "1.25rem",
                "fontWeight": 700
              }
            }
          ],
          "event": "@increment"
        },
        {
          "type": "form",
          "elements": [
            {
              "type": "button",
              "elements": [
                {
                  "type": "p",
                  "content": [
                    "-1"
                  ]
                }
              ],
              "style": {
                "backgroundColor": "rgb(239,68,68)",
                "color": "rgb(255,255,255)",
                "paddingLeft": "1.5rem",
                "paddingRight": "1.5rem",
                "paddingTop": "0.75rem",
                "paddingBottom": "0.75rem",
                "borderRadius": "0.5rem",
                "fontSize": "1.25rem",
                "fontWeight": 700
              }
            }
          ],
          "event": "@decrement"
        },
        {
          "type": "form",
          "elements": [
            {
              "type": "button",
              "elements": [
                {
                  "type": "p",
                  "content": [
                    "Reset to 0"
                  ]
                }
              ],
              "style": {
                "backgroundColor": "rgb(59,130,246)",
                "color": "rgb(255,255,255)",
                "paddingLeft": "1rem",
                "paddingRight": "1rem",
                "paddingTop": "0.5rem",
                "paddingBottom": "0.5rem",
                "borderRadius": "0.25rem"
              }
            }
          ],
          "event": "@initialize"
        }
      ],
      "style": {
        "display": "flex",
        "gap": "1rem",
        "justifyContent": "center"
      }
    },
    {
      "type": "h2",
      "content": [
        "How it Works"
      ]
    },
    {
      "type": "p",
      "content": [
        "Unlike the old counter with complex queryâ†’triggerâ†’action chains:"
      ]
    },
    {
      "type": "p",
      "content": [
        "1. ",
        {
          "type": "strong",
          "content": [
            "User clicks button"
          ]
        },
        " â†’ Sends increment/decrement action to MCP",
        " ",
        "2. ",
        {
          "type": "strong",
          "content": [
            "MCP calculates new value"
          ]
        },
        " â†’ Publishes Hypernote UI element ",
        "3. ",
        {
          "type": "strong",
          "content": [
            "Live subscription updates"
          ]
        },
        " â†’ UI refreshes automatically"
      ]
    },
    {
      "type": "p",
      "content": [
        "No triggers, no callbacks, just hypermedia! ðŸš€"
      ]
    }
  ],
  "type": "hypernote",
  "title": "Hypermedia Counter",
  "description": "Simple counter using MCP hypermedia elements - no callbacks!",
  "name": "hypermedia-counter",
  "queries": {
    "$counter_value": {
      "kinds": [
        30078
      ],
      "authors": [
        "19f5b5cd2fce663a3b4916b42c378c0280cce2bffd0af384380e91356fcff1d6"
      ],
      "#d": [
        "counter-value"
      ],
      "limit": 1,
      "pipe": [
        {
          "op": "first"
        },
        {
          "op": "get",
          "field": "content"
        },
        {
          "op": "default",
          "value": "0"
        }
      ]
    },
    "$counter_ui": {
      "kinds": [
        32616
      ],
      "authors": [
        "19f5b5cd2fce663a3b4916b42c378c0280cce2bffd0af384380e91356fcff1d6"
      ],
      "#d": [
        "counter-ui"
      ],
      "limit": 1,
      "pipe": [
        {
          "op": "first"
        }
      ]
    }
  },
  "events": {
    "@increment": {
      "kind": 25910,
      "json": {
        "jsonrpc": "2.0",
        "id": "{time.now}",
        "method": "tools/call",
        "params": {
          "name": "addone",
          "arguments": {
            "a": "{$counter_value or 0}"
          }
        }
      },
      "tags": [
        [
          "p",
          "19f5b5cd2fce663a3b4916b42c378c0280cce2bffd0af384380e91356fcff1d6"
        ]
      ]
    },
    "@decrement": {
      "kind": 25910,
      "json": {
        "jsonrpc": "2.0",
        "id": "{time.now}",
        "method": "tools/call",
        "params": {
          "name": "minusone",
          "arguments": {
            "a": "{$counter_value or 0}"
          }
        }
      },
      "tags": [
        [
          "p",
          "19f5b5cd2fce663a3b4916b42c378c0280cce2bffd0af384380e91356fcff1d6"
        ]
      ]
    },
    "@initialize": {
      "kind": 25910,
      "json": {
        "jsonrpc": "2.0",
        "id": "{time.now}",
        "method": "tools/call",
        "params": {
          "name": "initialize_counter",
          "arguments": {
            "value": 0
          }
        }
      },
      "tags": [
        [
          "p",
          "19f5b5cd2fce663a3b4916b42c378c0280cce2bffd0af384380e91356fcff1d6"
        ]
      ]
    }
  }
}
