{
  "version": "1.1.0",
  "component_kind": null,
  "elements": [
    {
      "type": "h1",
      "content": [
        "Nostr Client"
      ]
    },
    {
      "type": "div",
      "elements": [
        {
          "type": "h2",
          "content": [
            "Your Following Feed"
          ]
        },
        {
          "type": "component",
          "alias": "profile",
          "argument": "user.pubkey"
        },
        {
          "type": "json",
          "content": [],
          "attributes": {
            "variable": "user.pubkey"
          }
        }
      ],
      "style": {
        "backgroundColor": "rgb(255,255,255)",
        "padding": "1rem",
        "borderRadius": "0.5rem",
        "marginBottom": "1rem"
      }
    },
    {
      "type": "div",
      "elements": [
        {
          "type": "form",
          "elements": [
            {
              "type": "input",
              "content": [],
              "attributes": {
                "name": "message",
                "placeholder": "What's happening?"
              },
              "style": {
                "width": "100%",
                "padding": "0.5rem",
                "borderWidth": "1px",
                "borderRadius": "0.25rem"
              }
            },
            {
              "type": "button",
              "elements": [
                {
                  "type": "p",
                  "content": [
                    "Post"
                  ]
                }
              ],
              "style": {
                "backgroundColor": "rgb(59,130,246)",
                "color": "rgb(255,255,255)",
                "paddingLeft": "1rem",
                "paddingRight": "1rem",
                "paddingTop": "0.5rem",
                "paddingBottom": "0.5rem",
                "borderRadius": "0.25rem",
                "marginTop": "0.5rem"
              }
            }
          ],
          "event": "@post_note"
        }
      ],
      "style": {
        "backgroundColor": "rgb(255,255,255)",
        "padding": "1rem",
        "borderRadius": "0.5rem",
        "marginBottom": "1rem"
      }
    },
    {
      "type": "div",
      "elements": [
        {
          "type": "loop",
          "elements": [
            {
              "type": "div",
              "elements": [
                {
                  "type": "component",
                  "alias": "profile",
                  "argument": "$note.pubkey"
                },
                {
                  "type": "div",
                  "elements": [
                    {
                      "type": "p",
                      "content": [
                        "      ",
                        "{$note.content}",
                        " ",
                        "    "
                      ]
                    }
                  ],
                  "style": {
                    "marginTop": "0.5rem",
                    "color": "rgb(55,65,81)"
                  }
                },
                {
                  "type": "div",
                  "elements": [
                    {
                      "type": "p",
                      "content": [
                        "      Posted at: ",
                        "{$note.created_at}",
                        " ",
                        "    "
                      ]
                    }
                  ],
                  "style": {
                    "marginTop": "0.5rem",
                    "fontSize": "0.875rem",
                    "color": "rgb(107,114,128)"
                  }
                }
              ],
              "style": {
                "backgroundColor": "rgb(255,255,255)",
                "padding": "1rem",
                "borderRadius": "0.5rem",
                "marginBottom": "1rem"
              }
            }
          ],
          "source": "$following_feed",
          "variable": "$note"
        }
      ]
    }
  ],
  "type": "hypernote",
  "title": "Nostr Client",
  "description": "A simple Twitter-style Nostr client showing your following feed",
  "name": "nostr-client",
  "queries": {
    "$contact_list": {
      "kinds": [
        3
      ],
      "authors": [
        "user.pubkey"
      ],
      "limit": 1,
      "pipe": [
        {
          "op": "first"
        },
        {
          "op": "get",
          "field": "tags"
        },
        {
          "op": "whereIndex",
          "index": 0,
          "eq": "p"
        },
        {
          "op": "pluckIndex",
          "index": 1
        }
      ]
    },
    "$following_feed": {
      "kinds": [
        1
      ],
      "authors": "$contact_list",
      "limit": 20,
      "since": 0
    },
    "#profile": {
      "kinds": [
        32616
      ],
      "authors": [
        "0d6c8388dcb049b8dd4fc8d3d8c3bb93de3da90ba828e4f09c8ad0f346488a33"
      ],
      "#d": [
        "profile-badge"
      ],
      "limit": 1,
      "pipe": [
        {
          "op": "first"
        }
      ]
    }
  },
  "events": {
    "@post_note": {
      "kind": 1,
      "content": "{form.message}",
      "tags": [
        [
          "client",
          "hypernote-client"
        ]
      ]
    }
  }
}
