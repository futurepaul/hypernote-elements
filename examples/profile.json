{
  "version": "1.1.0",
  "component_kind": null,
  "queries": {
    "$profile_raw": {
      "kinds": [
        0
      ],
      "authors": [
        "user.pubkey"
      ],
      "limit": 1
    },
    "$profile": {
      "kinds": [
        0
      ],
      "authors": [
        "user.pubkey"
      ],
      "limit": 1,
      "pipe": [
        {
          "operation": "parse_json",
          "field": "content"
        }
      ]
    }
  },
  "elements": [
    {
      "type": "h1",
      "content": [
        "Profile Test"
      ]
    },
    {
      "type": "h2",
      "content": [
        "Raw profile event (unparsed):"
      ]
    },
    {
      "type": "p",
      "content": [
        "Pubkey: ",
        "{$profile_raw.pubkey}",
        "Content (raw JSON string): ",
        "{$profile_raw.content}",
        "Created: ",
        "{$profile_raw.created_at}"
      ]
    },
    {
      "type": "h2",
      "content": [
        "Parsed profile (content field parsed as JSON):"
      ]
    },
    {
      "type": "p",
      "content": [
        "Name: ",
        "{$profile.name}",
        "About: ",
        "{$profile.about}",
        "Picture: ",
        "{$profile.picture}"
      ]
    },
    {
      "type": "h2",
      "content": [
        "Profile Picture:"
      ]
    },
    {
      "type": "div",
      "style": {
        "display": "flex",
        "padding": "1rem",
        "flexDirection": "column",
        "alignItems": "center",
        "backgroundColor": "rgb(243,244,246)",
        "borderRadius": "0.5rem"
      },
      "elements": [
        {
          "type": "img",
          "style": {
            "width": "8rem",
            "height": "8rem",
            "borderRadius": "9999px"
          },
          "attributes": {
            "alt": "{$profile.name}",
            "src": "{$profile.picture}"
          }
        },
        {
          "type": "h3",
          "content": [
            "{$profile.name}"
          ]
        },
        {
          "type": "p",
          "content": [
            "{$profile.about}"
          ]
        }
      ]
    },
    {
      "type": "h2",
      "content": [
        "Loop access (with parsed content):"
      ]
    },
    {
      "type": "loop",
      "source": "$profile",
      "variable": "$p",
      "elements": [
        {
          "type": "div",
          "style": {
            "display": "flex",
            "marginBottom": "1rem",
            "padding": "1rem",
            "alignItems": "center",
            "gap": "1rem",
            "backgroundColor": "rgb(255,255,255)",
            "borderRadius": "0.5rem",
            "boxShadow": "0 0 #0000, 0 0 #0000, 0 1px 3px 0 rgb(0,0,0,0.1), 0 1px 2px -1px rgb(0,0,0,0.1)"
          },
          "elements": [
            {
              "type": "img",
              "style": {
                "width": "6rem",
                "height": "6rem",
                "borderRadius": "9999px"
              },
              "attributes": {
                "alt": "profile pic",
                "src": "{$p.picture}"
              }
            },
            {
              "type": "div",
              "elements": [
                {
                  "type": "p",
                  "content": [
                    {
                      "type": "strong",
                      "content": [
                        "Name:"
                      ]
                    },
                    " ",
                    "{$p.name}"
                  ]
                },
                {
                  "type": "p",
                  "content": [
                    {
                      "type": "strong",
                      "content": [
                        "About:"
                      ]
                    },
                    " ",
                    "{$p.about}"
                  ]
                },
                {
                  "type": "p",
                  "content": [
                    {
                      "type": "strong",
                      "content": [
                        "Website:"
                      ]
                    },
                    " ",
                    "{$p.website}"
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "h2",
      "content": [
        "Debug: View full parsed profile data:"
      ]
    },
    {
      "type": "json",
      "content": [],
      "attributes": {
        "variable": "$profile"
      }
    }
  ]
}
